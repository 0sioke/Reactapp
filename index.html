<!DOCTYPE html>
<html>
<head>
  <title>File Upload</title>
</head>
<body>
  <input type="file" id="fileInput">
  <button id="uploadButton">Upload</button>
  <p id="result"></p>

  <script>
    async function uploadFile() {
      const fileInput = document.getElementById('fileInput');
      const file = fileInput.files[0];
      console.log(file);
      const formData = new FormData();
      formData.append('file', file);

      try {
        const response = await fetch('https://2of0p6acoe.execute-api.us-east-1.amazonaws.com/upload/uploadfunc', {
          method: 'POST',
          body: JSON.stringify({
            filename: file.name,
          })
        });
        if (!response.ok) throw new Error('Failed to get upload URL');

        const { presigned_url, key } = await response.json();

        
        //const data = await response.json();

        console.log(presigned_url); // Handle the response from the server

        document.getElementById('result').textContent = 'File uploaded successfully!';
      } catch (error) {
        console.error('Error:', error);
        document.getElementById('result').textContent = 'Error uploading file. Please try again later.';
      }
    }

    document.getElementById('uploadButton').addEventListener('click', uploadFile);
  </script>
</body>
</html>
